[gd_scene load_steps=16 format=3 uid="uid://gt823aisyh37"]

[ext_resource type="PackedScene" uid="uid://7ggysrtwu6kj" path="res://models/props/door_exit/Door_Exit.glb" id="1_hpkx6"]
[ext_resource type="Script" uid="uid://dloe7c5ophwog" path="res://models/door_exit.gd" id="2_j2fel"]
[ext_resource type="Texture2D" uid="uid://bqp3t5mtyk7w8" path="res://models/props/door_exit/Door_Exit_Button_large_D.png" id="3_82xh8"]
[ext_resource type="Texture2D" uid="uid://b4bk0qtglwi6f" path="res://models/props/door_exit/Door_Exit_Button_large_E.png" id="4_ju5h2"]
[ext_resource type="Texture2D" uid="uid://kofqaw24hwj3" path="res://models/props/door_exit/Door_Exit_Button_large.png" id="5_myitl"]
[ext_resource type="AnimationLibrary" uid="uid://jy2x1d7hvxvo" path="res://models/door_anims.res" id="6_82xh8"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_usndi"]
albedo_texture = ExtResource("3_82xh8")
roughness_texture = ExtResource("5_myitl")
emission_enabled = true
emission_energy_multiplier = 3.0
emission_texture = ExtResource("4_ju5h2")

[sub_resource type="BoxShape3D" id="BoxShape3D_j2fel"]
size = Vector3(2.4794922, 1.5964355, 0.13891602)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_eimkp"]
animation = &"door_close"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_82xh8"]
animation = &"door_open"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ju5h2"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_myitl"]
advance_mode = 2
advance_condition = &"isOpen"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_eimkp"]
advance_mode = 2
advance_condition = &"!isOpen"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_eimkp"]
states/door_close/node = SubResource("AnimationNodeAnimation_eimkp")
states/door_close/position = Vector2(376, 100)
states/door_open/node = SubResource("AnimationNodeAnimation_82xh8")
states/door_open/position = Vector2(552, 100)
transitions = ["Start", "door_close", SubResource("AnimationNodeStateMachineTransition_ju5h2"), "door_close", "door_open", SubResource("AnimationNodeStateMachineTransition_myitl"), "door_open", "door_close", SubResource("AnimationNodeStateMachineTransition_eimkp")]

[sub_resource type="BoxShape3D" id="BoxShape3D_eimkp"]
size = Vector3(2.8967285, 2.4467773, 1.1572266)

[node name="Door_Exit" instance=ExtResource("1_hpkx6")]
script = ExtResource("2_j2fel")

[node name="Skeleton3D" parent="Armature" index="0"]
bones/1/position = Vector3(-1.4317775e-19, 1.1966895, -7.916066e-16)
bones/2/position = Vector3(-1.0462017, 1.1966895, 7.237446e-10)
bones/3/rotation = Quaternion(0.5000002, 0.50000006, 0.49999997, 0.49999997)

[node name="door" parent="Armature/Skeleton3D" index="0"]
surface_material_override/0 = SubResource("StandardMaterial3D_usndi")

[node name="BoneAttachment3D" type="BoneAttachment3D" parent="Armature/Skeleton3D" index="1"]
transform = Transform3D(6.917773e-10, 1, -7.660539e-15, 1, -6.91777e-10, -3.9019267e-07, -3.9019267e-07, -7.382983e-15, -1, -1.0462017, 1.1966895, -1.0347395e-10)
bone_name = "door_left"
bone_idx = 2

[node name="RigidBody3D" type="RigidBody3D" parent="Armature/Skeleton3D/BoneAttachment3D" index="0"]
transform = Transform3D(1, 2.880786e-21, 0, 2.8837627e-21, 1, 0, 0, 0, 1, 0.078469634, 1.012126, -3.061828e-08)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Armature/Skeleton3D/BoneAttachment3D/RigidBody3D" index="0"]
transform = Transform3D(1, -2.8950854e-22, 0, 2.4730714e-22, 1, 0, 0, 0, 1, -0.03515625, -0.76655185, 7.1054274e-14)
shape = SubResource("BoxShape3D_j2fel")

[node name="BoneAttachment3D2" type="BoneAttachment3D" parent="Armature/Skeleton3D" index="2"]
transform = Transform3D(-6.917771e-10, 1, -3.2196468e-15, -1, -6.91777e-10, 7.558438e-08, 7.558438e-08, -3.8302694e-15, 1, 8.278423e-10, 1.1966895, -1.0348108e-10)
bone_name = "door_right"
bone_idx = 1

[node name="RigidBody3D" type="RigidBody3D" parent="Armature/Skeleton3D/BoneAttachment3D2" index="0"]
transform = Transform3D(1, -2.8950854e-22, 0, 2.4730714e-22, 1, 0, 0, 0, 1, -0.015517473, 1.562753, 1.1728929e-09)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Armature/Skeleton3D/BoneAttachment3D2/RigidBody3D" index="0"]
transform = Transform3D(1, -2.8950854e-22, 0, 2.4730714e-22, 1, 0, 0, 0, 1, -0.03515625, -0.76655185, 7.1054274e-14)
shape = SubResource("BoxShape3D_j2fel")

[node name="AnimationPlayer" parent="." index="1"]
libraries = {
&"": ExtResource("6_82xh8")
}

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
tree_root = SubResource("AnimationNodeStateMachine_eimkp")
anim_player = NodePath("../AnimationPlayer")
parameters/conditions/!isOpen = false
parameters/conditions/isOpen = false

[node name="Area3D" type="Area3D" parent="." index="3"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.2233887, -0.6932634)
shape = SubResource("BoxShape3D_eimkp")

[node name="DoorSounds" type="AudioStreamPlayer3D" parent="." index="4"]
volume_db = -10.0

[connection signal="body_entered" from="Area3D" to="." method="_on_area_3d_body_entered"]
